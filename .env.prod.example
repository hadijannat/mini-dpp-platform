# =============================================================================
# Production Environment Configuration
# Copy to .env and fill in all values before running:
#   docker compose -f docker-compose.prod.yml up -d
# =============================================================================

# --- PostgreSQL ---
POSTGRES_USER=dpp_user
POSTGRES_PASSWORD=CHANGE_ME_postgres_strong_password
POSTGRES_DB=dpp_platform

# --- Redis ---
REDIS_PASSWORD=CHANGE_ME_redis_strong_password

# --- Keycloak Admin Console ---
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_keycloak_admin_password

# --- Keycloak Database (separate from main Postgres DB) ---
KEYCLOAK_DB_NAME=keycloak
KEYCLOAK_DB_USERNAME=keycloak
KEYCLOAK_DB_PASSWORD=CHANGE_ME_keycloak_db_password

# --- Keycloak Backend Client Secret ---
# Must match the value in the realm export (or set after first boot via admin UI)
KEYCLOAK_BACKEND_CLIENT_SECRET=CHANGE_ME_backend_client_secret

# --- Keycloak SMTP (account verification emails) ---
KEYCLOAK_SMTP_HOST=smtp.example.com
KEYCLOAK_SMTP_PORT=587
KEYCLOAK_SMTP_FROM=no-reply@dpp-platform.dev
KEYCLOAK_SMTP_FROM_DISPLAY_NAME=DPP Platform
KEYCLOAK_SMTP_REPLY_TO=support@dpp-platform.dev
KEYCLOAK_SMTP_REPLY_TO_DISPLAY_NAME=DPP Platform Support
KEYCLOAK_SMTP_AUTH=true
KEYCLOAK_SMTP_STARTTLS=true
KEYCLOAK_SMTP_SSL=false
KEYCLOAK_SMTP_USER=CHANGE_ME_smtp_username
KEYCLOAK_SMTP_PASSWORD=CHANGE_ME_smtp_password

# --- Backend Notification SMTP (role request lifecycle emails) ---
NOTIFICATIONS_EMAIL_ENABLED=true
NOTIFICATIONS_SMTP_HOST=smtp.example.com
NOTIFICATIONS_SMTP_PORT=587
NOTIFICATIONS_SMTP_USER=CHANGE_ME_notification_smtp_username
NOTIFICATIONS_SMTP_PASSWORD=CHANGE_ME_notification_smtp_password
NOTIFICATIONS_SMTP_STARTTLS=true
NOTIFICATIONS_FROM_EMAIL=no-reply@dpp-platform.dev
NOTIFICATIONS_FROM_NAME=DPP Platform
NOTIFICATIONS_ADMIN_FALLBACK_EMAILS=platform-admins@dpp-platform.dev

# --- MinIO Object Storage ---
MINIO_ACCESS_KEY=minio_admin
MINIO_SECRET_KEY=CHANGE_ME_minio_strong_password

# --- Encryption ---
# Generate with: openssl rand -base64 32
ENCRYPTION_MASTER_KEY=CHANGE_ME_base64_encoded_key

# --- Optional: GitHub Token for IDTA Templates ---
IDTA_TEMPLATES_GITHUB_TOKEN=
IDTA_TEMPLATES_REPO_REF=1d4e0b45469f9260228ca6e99ff907c670476e2a

# --- Alertmanager Webhook Endpoints ---
# Required when using infra/monitoring/alertmanager/alertmanager.yml
ALERTMANAGER_WEBHOOK_URL=https://alerts.example.com/default
ALERTMANAGER_WEBHOOK_URL_CRITICAL=https://alerts.example.com/critical

# --- Public CIRPASS Lab ---
CIRPASS_RESULTS_URL=https://cirpassproject.eu/project-results/
CIRPASS_REFRESH_TTL_SECONDS=43200
CIRPASS_SESSION_TTL_SECONDS=86400
CIRPASS_SESSION_TOKEN_SECRET=CHANGE_ME_cirpass_session_hmac_secret
CIRPASS_LEADERBOARD_LIMIT_DEFAULT=20
CIRPASS_LEADERBOARD_LIMIT_MAX=100
CIRPASS_LAB_SCENARIO_ENGINE_ENABLED=true
CIRPASS_LAB_LIVE_MODE_ENABLED=false
CIRPASS_LAB_INSPECTOR_ENABLED=true
CIRPASS_LAB_TELEMETRY_RETENTION_DAYS=30
